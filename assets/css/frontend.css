/* ==== Layout base ==== */
.rep-container{max-width:1200px;margin:0 auto;padding:20px;}
.rep-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px;}
.rep-card{border:1px solid #e5e5e5;border-radius:12px;padding:12px;background:#fff;box-shadow:0 2px 10px rgba(0,0,0,.03)}
.rep-card-xl{background:#fff;border:1px solid #e8e8e8;border-radius:14px;padding:18px;box-shadow:0 4px 14px rgba(0,0,0,.04)}
.rep-thumb{display:block;width:100%;height:auto;border-radius:8px}

/* ==== Encabezado de ficha ==== */
.rep-head{display:flex;justify-content:space-between;gap:16px;align-items:flex-start;margin-bottom:10px}
.rep-title{margin:0}
.rep-sub{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
.rep-chip{background:#f4f6f8;border:1px solid #e6e8ea;border-radius:999px;padding:.25rem .6rem;font-size:.9rem}
.rep-ref{font-weight:600;margin-right:.5rem}
.rep-price-lg{font-size:1.6rem;font-weight:700}

/* ==== Barra de anclas ==== */
.rep-anchorbar{
  display:flex; gap:8px; margin:10px 0 14px;
  position:sticky; top:64px; z-index:2; background:#fff; padding:6px 0;
}
.rep-anchorbar a{
  background:#f5f7fa; border:1px solid #e5e8ee; border-radius:10px;
  padding:.45rem .8rem; text-decoration:none; color:#111; font-weight:600;
}
.rep-anchorbar a:hover{ background:#111; color:#fff; border-color:#111; }

/* ==== Secciones ==== */
.rep-section{ scroll-margin-top:80px; margin-top:14px; }

/* ==== Listado ==== */
.rep-title a{text-decoration:none;color:#111}
.rep-title a:hover{text-decoration:underline}
.rep-price{font-weight:600}
.rep-pagination ul{list-style:none;display:flex;gap:8px;flex-wrap:wrap;padding:0;margin:16px 0}
.rep-pagination li{margin:0}

/* ==== Ficha: dos columnas ==== */
.rep-two{display:grid;grid-template-columns:2fr 1fr;gap:24px;margin-top:12px}
.rep-box{background:#fafbfc;border:1px solid #eceff3;border-radius:10px;padding:14px}
.rep-features{margin:0;padding-left:1rem}
.rep-features li{margin:.25rem 0}

/* ==== Notas pequeñas ==== */
.rep-note{display:block;margin-top:6px;color:#666;font-size:.85rem}

/* ==== Eficiencia energética (Reemplazado con cariño) ==== */
.rep-energy-cert { 
    margin-top: 20px; 
}
.rep-energy-cert h3 {
    margin-bottom: 10px;
}
.rep-energy-scale-new {
    border: 2px solid #333;
    font-family: Arial, sans-serif;
    max-width: 350px; /* Ancho ajustado */
    background: #fff;
    padding: 5px;
}
.rep-energy-header {
    display: grid;
    grid-template-columns: 1.5fr 1fr 1fr; /* Tres columnas */
    gap: 5px;
    font-size: 10px;
    font-weight: bold;
    text-align: center;
    border-bottom: 2px solid #333;
    padding: 4px 0;
    margin-bottom: 5px;
}
.rep-energy-header .rep-energy-col-title span { 
    display: block;
    font-weight: normal; 
    font-size: 9px;
    line-height: 1.1;
}
.rep-energy-rows { 
    display: grid;
    grid-template-columns: 1.5fr 1fr 1fr; /* Tres columnas */
    gap: 5px;
    align-items: center;
}
.rep-energy-row {
    display: contents; /* Hacemos que cada fila se comporte como celdas de la rejilla principal */
}
.rep-energy-letter {
    font-size: 18px;
    font-weight: bold;
    padding: 4px 8px;
    position: relative;
    clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 50%, calc(100% - 10px) 100%, 0 100%);
    margin: 2px 0;
}
.rep-energy-letter span { font-size: 10px; font-weight: normal; margin-left: 5px; }

/* Anchos escalados para las barras */
.rep-energy-letter[data-letter="A"] { width: 45%; }
.rep-energy-letter[data-letter="B"] { width: 55%; }
.rep-energy-letter[data-letter="C"] { width: 65%; }
.rep-energy-letter[data-letter="D"] { width: 75%; }
.rep-energy-letter[data-letter="E"] { width: 85%; }
.rep-energy-letter[data-letter="F"] { width: 95%; }
.rep-energy-letter[data-letter="G"] { width: 100%; }

.rep-energy-value {
    text-align: center;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    border-left: 1px solid #ccc;
    padding: 4px;
}
.rep-energy-value span {
    background-color: #000;
    color: #fff;
    font-weight: bold;
    padding: 4px 8px;
    font-size: 14px;
    clip-path: polygon(10px 0, 100% 0, calc(100% - 10px) 100%, 0 100%);
}
.is-active .rep-energy-value span {
    display: inline-block;
}
.rep-energy-tramite { 
    grid-column: 1 / -1; /* Ocupa todas las columnas */
    text-align: center; 
    padding: 10px; 
    font-weight: bold; 
}


/* ==== Formulario de contacto ==== */
.rep-single-contact{margin-top:20px;border-top:1px solid #eee;padding-top:16px}
.rep-contact{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.rep-contact .rep-field{display:flex;flex-direction:column}
.rep-contact input[type="text"],
.rep-contact input[type="email"],
.rep-contact input[type="tel"],
.rep-contact input[type="number"],
.rep-contact textarea{
  padding:.6rem .7rem;border:1px solid #dfe3e8;border-radius:8px;background:#fff;
}
.rep-contact textarea{grid-column:1/-1;resize:vertical}
.rep-actions{grid-column:1/-1;margin-top:8px}
.rep-contact .button{background:#111;color:#fff;border:none;border-radius:10px;padding:.6rem 1rem;cursor:pointer}
.rep-contact .button:hover{background:#000}

/* ==== Mensajes ==== */
.rep-alert{padding:10px;border-radius:6px;margin-bottom:12px}
.rep-alert.rep-ok{background:#e8f7ee;border:1px solid #b6e2c5}
.rep-alert.rep-err{background:#fdecea;border:1px solid #f5c2bf}

/* ==== Simulador de hipoteca ==== */
.rep-mortgage .rep-m-rows{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.rep-mortgage .rep-m-row{display:flex;flex-direction:column}
.rep-mortgage input[type="number"]{padding:.6rem .7rem;border:1px solid #dfe3e8;border-radius:8px;background:#fff}
.rep-mortgage .rep-m-out{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:10px}
.rep-mortgage .rep-m-badge{background:#f0f7ff;border:1px solid #d6e6ff;border-radius:10px;padding:10px;font-weight:600;text-align:center}

/* ==== Responsive ==== */
@media (max-width:900px){
  .rep-two{grid-template-columns:1fr}
  .rep-mortgage .rep-m-rows{grid-template-columns:1fr 1fr}
  .rep-mortgage .rep-m-out{grid-template-columns:1fr}
  .rep-contact{grid-template-columns:1fr}
}

/* CTA en anchorbar */
.rep-anchorbar .rep-cta{
  background:#0a7cff; border-color:#0a7cff; color:#fff;
}
.rep-anchorbar .rep-cta:hover{ background:#075fcc; border-color:#075fcc; color:#fff; }

/* ===== Listado “tipo PDF” ===== */
.rep-grid-list{grid-template-columns:repeat(auto-fill,minmax(320px,1fr))}
.rep-card-line{position:relative;padding-top:8px}
.rep-badge{
  position:absolute;left:12px;top:12px;background:#ff3b30;color:#fff;
  padding:.25rem .5rem;border-radius:8px;font-weight:700;font-size:.85rem;z-index:2
}

.rep-card-slider{position:relative;overflow:hidden;border-radius:10px}
.rep-card-slider .rep-cs-stage img{display:block;width:100%;height:220px;object-fit:cover}
.rep-card-slider .rep-cs-prev,
.rep-card-slider .rep-cs-next{
  position:absolute;top:50%;transform:translateY(-50%);
  background:#0008;color:#fff;border:none;width:34px;height:34px;border-radius:50%;cursor:pointer
}
.rep-card-slider .rep-cs-prev{left:8px}
.rep-card-slider .rep-cs-next{right:8px}
.rep-card-slider .rep-cs-prev:hover,
.rep-card-slider .rep-cs-next:hover{background:#000}

/* Precio + mini características */
.rep-card-line .rep-price{margin-top:8px;font-weight:700}
.rep-mini-feats{display:flex;gap:12px;list-style:none;padding:0;margin:6px 0}
.rep-mini-feats li{display:flex;align-items:center;gap:6px;color:#333}
.rep-mini-feats svg{flex:0 0 16px}

/* Filtros */
.rep-filters{display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1fr 0.8fr 0.8fr 1fr auto;gap:8px;margin:10px 0 16px}
.rep-filters input,.rep-filters select{padding:.5rem;border:1px solid #dfe3e8;border-radius:8px}
.rep-filters .rep-btn{background:#111;color:#fff;border:none;border-radius:10px;padding:.6rem 1rem}
@media (max-width: 980px){
  .rep-filters{grid-template-columns:1fr 1fr;gap:10px}
}

/* CTA en anchorbar */
.rep-anchorbar .rep-cta{background:#0a7cff;border-color:#0a7cff;color:#fff;}
.rep-anchorbar .rep-cta:hover{background:#075fcc;border-color:#075fcc;color:#fff;}

/* ==== Fixes Safari para cards ==== */
.rep-card-slider .rep-cs-stage img{
  display:block;
  width:100%;
  height:220px;
  object-fit:cover;
  -webkit-transform: translateZ(0);  /* compositing para webkit */
  -webkit-backface-visibility: hidden;
}
.rep-card-slider{position:relative;overflow:hidden;border-radius:10px;-webkit-transform: translateZ(0)}
.rep-card-slider .rep-cs-prev,
.rep-card-slider .rep-cs-next{ -webkit-user-select:none; user-select:none }

/* Gap fallback para Safari antiguos */
.rep-grid{grid-gap:20px}

/* Botón filtros en Safari */
.rep-filters .rep-btn{ -webkit-appearance: none; }

